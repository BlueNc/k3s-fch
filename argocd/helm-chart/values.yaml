global:
  image:
    repository: docker-registry.ref.gnc/argoproj/argocd

argo-cd:
  namespace: argocd
  configs:
    repositories:
      k3s-fch:
        url: https://github.com/BlueNc/k3s-fch.git
    params:
      server.insecure: true
  repoServer:
    env:
      - name: HTTP_PROXY
        value: http://proxy-web.proxy-dmz.gnc:3128
      - name: HTTPS_PROXY
        value: http://proxy-web.proxy-dmz.gnc:3128
      - name: NO_PROXY
        value: 127.0.0.0/24,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,0.0.0.0/32,localhost,.svc
  dex:
    enabled: false
  server:
    ingress:
      enabled: true
      ingressClassName: traefik
      hosts:
        - argo-cd.k3s-fch.dev.gnc
      annotations:
        cert-manager.io/issuer: "ca-issuer"
      tls:
        - hosts:
            - argo-cd.k3s-fch.dev.gnc
          secretName: k3s-fch-dev-gnc
      https: false

argocd-apps:
  applications:
    - name: apps-of-apps
      namespace: argocd
      additionalAnnotations:
        "helm.sh/resource-policy": keep
      destination:
        namespace: argocd
        server: https://kubernetes.default.svc
      project: argocd
      source:
        path: argocd/apps
        repoURL: https://github.com/BlueNc/k3s-fch.git
        targetRevision: HEAD
        directory:
          recurse: true
      syncPolicy:
        automated:
          selfHeal: true
          prune: true
  projects:
    - name: argocd
      namespace: argocd
      description: Argocd Project
      sourceRepos:
        - "*"
      destinations:
        - namespace: argocd
          server: https://kubernetes.default.svc
